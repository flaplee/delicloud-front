'use strict';define(['common/kernel/kernel','site/util/util','common/text/text!page/imports/member.html!strip'],function(a,b,c){function d(c){var d=new Date().valueOf().toString();b.ajaxSubmit({type:'get',url:c.url,dauth:c.userid+' '+d+' '+a.buildDauth(c.userid,c.token,d),data:{task_id:c.task_id,status:c.status,size:1e3},success:function success(d){if(1==c.status?c.$target.find('.imports-table-enable table.table tbody.tbody >').remove():c.$target.find('.imports-table-unable table.table tbody.tbody >').remove(),console.log('getRecordInfo',d),0==d.code){var e=d.data.result,f='';1==c.status?c.$target.find('span.nav-enable-num').text(e.total):c.$target.find('span.nav-unable-num').text(e.total),0<=e.total&&e.rows&&0<e.rows.length?($.each(e.rows,function(a,b){f+='<tr>                                <td class="user-index">'+(a+1)+'</td>                                <td class="user-name"><p>'+b.name+'</p></td>                                <td class="user-employeenum">'+b.employee_num+'</td>                                <td class="user-deptname" title="'+b.dept_name+'"><p>'+b.dept_name+'</p></td>                                <td class="user-title" title="'+b.title+'"><p>'+b.title+'</p></td>                                <td class="user-mobile">'+b.mobile+'</td>                                '+(c.status&&1!=c.status?'<td class="user-error"><span class="red">'+(b.msg&&''!=b.msg?b.msg:'\u901A\u8BAF\u5F55\u4E2D\u5DF2\u5B58\u5728\u8BE5\u624B\u673A\u53F7\u7801\u7684\u5458\u5DE5')+'</span></td>':'')+'                            </tr>'}),1==c.status?c.$target.find('.imports-table-enable .table-data-wrap .table-data tbody.tbody').append(f):c.$target.find('.imports-table-unable .table-data-wrap .table-data tbody.tbody').append(f)):1==c.status?0==c.$target.find('.imports-table-enable .table-data-wrap .table-data tbody.tbody tr').length&&c.$target.find('.imports-table-enable .table-data-wrap .table-data tbody.tbody').append('<tr class="empty"><td rowspan="3" colspan="5">\u6682\u65E0\u5DF2\u5BFC\u5165\u6570\u636E</td></tr>'):0==c.$target.find('.imports-table-unable .table-data-wrap .table-data tbody.tbody tr').length&&c.$target.find('.imports-table-unable .table-data-wrap .table-data tbody.tbody').append('<tr class="empty"><td rowspan="3" colspan="6">\u6682\u65E0\u4E0D\u53EF\u5BFC\u5165\u6570\u636E</td></tr>'),1==c.status?b.paging(c.$target.find('.imports-enable-paging'),parseInt(a.parseHash(location.hash).args.p?a.parseHash(location.hash).args.p:1),parseInt(e.total),5):b.paging(c.$target.find('.imports-unable-paging'),parseInt(a.parseHash(location.hash).args.p?a.parseHash(location.hash).args.p:1),parseInt(e.total),5)}else a.hint('\u67E5\u770B\u5386\u53F2\u5BFC\u5165\u4EFB\u52A1\u5931\u8D25','error')}})}var e=a.parseHash(location.hash).args.id,f=b.getCookie('userid'),g=b.getCookie('token'),h=b.getCookie('orgid'),i=$(c),j=$('#imports .imports-box'),k=j.find('.imports-info .imports-inner');k.append(i);var l=k.find('.imports-inner-data .imports-nav a'),m=k.find('.imports-inner-data .imports-table'),n=k.find('.imports-upload button.btn-upload');return l.on('click',function(b){b.stopPropagation();var d=a.parseHash(location.hash),e=d.args.id,f=$(this),c=f.index();f.hasClass('active')||(f.addClass('active').siblings().removeClass('active'),m.find('>div').eq(c).addClass('active').siblings().removeClass('active'),m.find('>div').eq(c).find('.table-data-wrap').addClass('active'),m.find('>div').eq(c).siblings().find('.table-data-wrap').removeClass('active'),d.args.imports=0==c?'enable':'unable',a.replaceLocation(d))}),n.on('click',function(b){b.stopPropagation();var c=a.parseHash(location.hash);c={id:'imports',args:{}},a.replaceLocation(c)}),e&&(d({status:1,task_id:e,userid:f,token:g,url:'/v1.0/importtask/item/byTask',orgid:h,$target:k.find('.imports-inner-data')}),d({status:-1,task_id:e,userid:f,token:g,url:'/v1.0/importtask/item/byTask',orgid:h,$target:k.find('.imports-inner-data')})),function(){}});