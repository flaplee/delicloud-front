'use strict';define(['common/kernel/kernel','site/util/util'],function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=$('#home .home-box'),o=n.find('.home-record'),p=o.find('.record-top p.text'),q=o.find('.record-main .device span em'),r=o.find('.record-main .app span em'),s=o.find('.record-main .count span em'),t=n.find('.home-index'),u=t.find('.banner'),v=t.find(' .bannerNav'),w=function(c){var d=new Date().valueOf().toString(),e={type:'group'};c.orgid?e.org_id=c.orgid:'',b.ajaxSubmit({type:'get',url:'/v1.0/admin/auth/my',dauth:c.userid+' '+d+' '+a.buildDauth(c.userid,c.token,d),data:e,success:function success(a){if(0==a.code){var c=a.data.result;if(c&&1==c.length){var d=b.getUserData();d.organization[b.getCookie('orgindex')]!=c[0]&&(d.organization[b.getCookie('orgindex')]=c[0],b.setUserData(d));b.setCookie('orgname',c[0].org_name),b.setCookie('device_ids',c[0].device_ids?c[0].device_ids.length:0),b.setCookie('app_ids',c[0].app_ids?c[0].app_ids.length:0),b.setCookie('employee_count',c[0].employee_count),p.text(c[0].org_name),q.text(c[0].device_ids?c[0].device_ids.length:0),r.text(c[0].app_ids?c[0].app_ids.length:0),s.text(c[0].employee_count)}}}})};return{onload:function onload(){if(c=a.parseHash(location.hash),d=c.id,e=b.getCookie('userid'),f=b.getCookie('token'),g=b.getCookie('orgid'),h=b.getCookie('orgname'),i=b.getCookie('parentid'),j=b.getCookie('device_ids'),k=b.getCookie('app_ids'),l=b.getCookie('employee_count'),m=b.getCookie('orgindex'),void 0===e||void 0===f||void 0===g)b.setUserData(void 0),a.replaceLocation({args:{},id:'loginhome'});else{var n={userid:e,token:f};if(g&&(n.orgid=g),'home'==d){var o=$('#header .user-head .nav-top .nav-item');o.find('a.navlink').removeClass('navlink-current'),o.find('a.navlink.homeBtn').addClass('navlink-current')}w(n)}}}});