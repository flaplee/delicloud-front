'use strict';define(['common/kernel/kernel','site/util/util'],function(a,b){function c(c){c.find('>').remove();var e=new Date().valueOf().toString();b.ajaxSubmit({type:'get',url:'/v1.0/admin/app/my',dauth:d+' '+e+' '+a.buildDauth(d,f,e),data:{org_id:g},success:function success(a){var b=a.data.result;if(0<b.length)for(var e,h=0;h<b.length;h++){e=b[h].binds;for(var i=0;i<e.length;i++){var j=$('<div class="app-item" data-app_id="'+e[i].id+'" title="'+e[i].app.name+'">\t\t\t\t\t\t\t\t<div class="item-icon-wrap">\t\t\t\t\t\t\t\t\t<img class="item-icon" src="'+(e[i].app.icon?e[i].app.icon:'')+'">\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t<div class="item-title">'+e[i].app.name+'</div>\t\t\t\t\t\t\t\t<div class="item-info"></div>\t\t\t\t\t\t\t</div>');c.append(j),function setTargetApp(a,b){a.on('click',function(a){a.stopPropagation(),window.location.href=''+b+'?user_id='+d+'&org_id='+g+'&token='+f+'&uuid='})}(j,e[i].app.web_url)}}c.append('<a class="app-item app-item-add" href="/oa/#!app" title="\u5B89\u88C5\u65B0\u5E94\u7528">\t\t\t\t\t<div class="item-icon-wrap"></div>\t\t\t\t\t<div class="item-title">\u5B89\u88C5\u65B0\u5E94\u7528</div>\t\t\t\t\t<div class="item-info"></div>\t\t\t\t</a>')}})}var d,f,g,e,h,i,j,k=$('#apphome .app-box'),l=k.find('.app-main .app-installed .app-list.app-installed-list');return{onload:function onload(){if(d=b.getCookie('userid'),f=b.getCookie('token'),g=b.getCookie('orgid'),e=b.getCookie('orgname'),h=b.getCookie('parentid'),i=a.parseHash(location.hash),j=i.id,void 0===d||void 0===f||void 0===g)b.setUserData(void 0),a.replaceLocation({args:{},id:'loginhome'});else{if('apphome'==j){var k=$('#header .user-head .nav-top .nav-item');k.find('a.navlink').removeClass('navlink-current'),k.find('a.navlink.appBtn').addClass('navlink-current')}c(l)}}}});