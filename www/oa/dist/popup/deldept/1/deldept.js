'use strict';define(['module','common/kernel/kernel','site/util/util','page/contacts/contacts'],function(a,b,c,d){var e,f,g,h=c.getCookie('userid'),i=c.getCookie('token'),j=a.id.replace(/^[^/]+\/|\/[^/]+/g,''),k=$('#'+j),l=k.find('.del-title'),m=k.find('.btn-confirm'),n=k.find('.btn-close');return{onload:function onload(a){console.log('params',a),e=a.data,f=a.func,g=a.isNeedLoad,l.text(e.title),m.off('click').on('click',function(){c.ajaxSubmit({type:'post',url:'/v1.0/org/department/delete',silent:!0,dauth:h+' '+new Date().valueOf()+' '+b.buildDauth(h,i,new Date().valueOf()),data:{department_id:e.id},success:function success(a){console.log('resp',a),0==a.code?(b.hint('\u90E8\u95E8\u5220\u9664\u6210\u529F~',3e3),b.closePopup('deldept'),f&&'function'==typeof f&&f(),g&&!0==g&&d.initDepartment($('#contacts .contacts-menu .contacts-list .contacts-team .dept-select-list ul.dept-select-inner'),{status:'onload',type:'parent',parentid:e.pid,orgid:e.id},!0)):(b.hint(a.msg,'error'),b.closePopup('deldept'))},error:function error(a){b.hint(a.msg,'error'),b.closePopup('deldept')}})}),n.off('click').on('click',function(){b.closePopup('deldept')})}}});